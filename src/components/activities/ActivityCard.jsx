import { useNavigation } from '@react-navigation/native';
import React from 'react';
import {View, Text, StyleSheet, Image, TouchableOpacity} from 'react-native';
import Svg, {Circle, Path} from 'react-native-svg';

const STATUS_CONFIG = {
  Confirmed: {
    bg: '#DCFCE7',
    text: '#16A34A',
  },
  Pending: {
    bg: '#FEF3C7',
    text: '#F59E0B',
  },
  Cancelled: {
    bg: '#FEE2E2',
    text: '#EF4444',
  },
};

export default function ActivityCard({
  image,
  name,
  phone,
  dateTime,
  status,
  onView,
}) {
  const statusStyle = STATUS_CONFIG[status];
  const navigation=useNavigation();
  const renderStatusIcon = () => {
    switch (status) {
      case 'Confirmed':
        return (
          <Svg width={12} height={12} viewBox="0 0 12 12" fill="none">
            <Circle cx="6" cy="6" r="6" fill="#0BB501" />
            <Path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M8.29098 4.34673C8.35847 4.41424 8.39639 4.50579 8.39639 4.60125C8.39639 4.69671 8.35847 4.78826 8.29098 4.85577L5.59266 7.55409C5.557 7.58976 5.51467 7.61805 5.46807 7.63736C5.42148 7.65666 5.37154 7.6666 5.3211 7.6666C5.27067 7.6666 5.22073 7.65666 5.17413 7.63736C5.12754 7.61805 5.0852 7.58976 5.04954 7.55409L3.7089 6.21369C3.67452 6.18049 3.64709 6.14076 3.62823 6.09684C3.60936 6.05292 3.59943 6.00568 3.59901 5.95788C3.5986 5.91008 3.60771 5.86267 3.62581 5.81843C3.64391 5.77419 3.67064 5.73399 3.70444 5.70019C3.73824 5.66639 3.77844 5.63966 3.82268 5.62156C3.86692 5.60346 3.91433 5.59435 3.96213 5.59476C4.00993 5.59518 4.05717 5.60511 4.10109 5.62398C4.14501 5.64284 4.18473 5.67027 4.21794 5.70465L5.32098 6.80769L7.7817 4.34673C7.81513 4.31328 7.85483 4.28674 7.89852 4.26864C7.94222 4.25053 7.98905 4.24121 8.03634 4.24121C8.08364 4.24121 8.13047 4.25053 8.17416 4.26864C8.21785 4.28674 8.25755 4.31328 8.29098 4.34673Z"
              fill="white"
            />
          </Svg>
        );
      case 'Pending':
        return (
          <Svg width={16} height={16} viewBox="0 0 16 16" fill="none">
            <Path
              d="M8 15C11.3137 15 14 12.3137 14 9C14 5.68629 11.3137 3 8 3C4.68629 3 2 5.68629 2 9C2 12.3137 4.68629 15 8 15Z"
              stroke="#FFAB00"
              strokeWidth="1.5"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
            <Path
              d="M7.33337 6.3335V9.66683H10.6667"
              stroke="#FFAB00"
              strokeWidth="1.5"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
          </Svg>
        );
      case 'Cancelled':
        return (
          <Svg width={16} height={16} viewBox="0 0 16 16" fill="none">
            <Path
              d="M10.25 5.75L5.75 10.25M5.75 5.75L10.25 10.25"
              stroke="#FF0000"
              strokeWidth="1.5"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
            <Path
              d="M8 14.25C11.4518 14.25 14.25 11.4518 14.25 8C14.25 4.54822 11.4518 1.75 8 1.75C4.54822 1.75 1.75 4.54822 1.75 8C1.75 11.4518 4.54822 14.25 8 14.25Z"
              stroke="#FF0000"
              strokeWidth="1.5"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
          </Svg>
        );
      default:
        return null;
    }
  };

  return (
    <View style={styles.card}>
      {/* LEFT COLUMN */}
      <View style={styles.leftCol}>
        <Image source={{uri: image}} style={styles.image} />

        {/* STATUS PILL */}
        <View style={[styles.statusPill, {backgroundColor: statusStyle.bg}]}>
          {renderStatusIcon()}
          <Text style={[styles.statusText, {color: statusStyle.text}]}>
            {status}
          </Text>
        </View>
      </View>

      {/* RIGHT COLUMN */}
      <View style={styles.rightCol}>
        <Text style={styles.name}>{name}</Text>

        <View style={styles.row}>
          {/* Phone */}
          <Svg
            width="18"
            height="18"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <Path
              d="M7.36504 2.29805C7.10504 1.77838 6.56171 1.35805 5.89437 1.43238C5.29737 1.49871 4.41104 1.72071 3.80671 2.44871C3.18637 3.19638 2.95504 4.36238 3.43137 6.10938C3.94004 7.97305 4.69537 9.81038 5.63437 11.2927C6.56637 12.7644 7.71437 13.9424 9.03137 14.394C10.196 14.7934 11.0867 14.6267 11.7364 14.188C12.363 13.765 12.707 13.1287 12.885 12.688C13.0844 12.1947 12.953 11.681 12.693 11.3024L11.734 9.90771C11.5222 9.59954 11.2172 9.36733 10.8637 9.24514C10.5103 9.12294 10.127 9.11719 9.77004 9.22872L8.44471 9.64305C8.40284 9.65731 8.35771 9.659 8.31489 9.64793C8.27206 9.63685 8.23342 9.61349 8.20371 9.58072C7.61371 8.88972 6.95271 7.92605 6.77304 6.95072C6.76729 6.92467 6.7712 6.89743 6.78404 6.87405C6.97904 6.54638 7.31471 6.17505 7.64837 5.85005C8.21404 5.29938 8.42837 4.42405 8.05504 3.67805L7.36504 2.29805Z"
              fill="#5E23DC"
            />
          </Svg>

          <Text style={styles.subText}>{phone}</Text>
        </View>

        <View style={styles.row}>
          {/* Date */}
          <Svg
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <Path
              d="M5.66671 9.33317C5.88772 9.33317 6.09968 9.24537 6.25596 9.08909C6.41224 8.93281 6.50004 8.72085 6.50004 8.49984C6.50004 8.27882 6.41224 8.06686 6.25596 7.91058C6.09968 7.7543 5.88772 7.6665 5.66671 7.6665C5.44569 7.6665 5.23373 7.7543 5.07745 7.91058C4.92117 8.06686 4.83337 8.27882 4.83337 8.49984C4.83337 8.72085 4.92117 8.93281 5.07745 9.08909C5.23373 9.24537 5.44569 9.33317 5.66671 9.33317ZM5.66671 11.6665C5.88772 11.6665 6.09968 11.5787 6.25596 11.4224C6.41224 11.2661 6.50004 11.0542 6.50004 10.8332C6.50004 10.6122 6.41224 10.4002 6.25596 10.2439C6.09968 10.0876 5.88772 9.99984 5.66671 9.99984C5.44569 9.99984 5.23373 10.0876 5.07745 10.2439C4.92117 10.4002 4.83337 10.6122 4.83337 10.8332C4.83337 11.0542 4.92117 11.2661 5.07745 11.4224C5.23373 11.5787 5.44569 11.6665 5.66671 11.6665ZM8.83337 8.49984C8.83337 8.72085 8.74558 8.93281 8.5893 9.08909C8.43302 9.24537 8.22105 9.33317 8.00004 9.33317C7.77903 9.33317 7.56707 9.24537 7.41079 9.08909C7.2545 8.93281 7.16671 8.72085 7.16671 8.49984C7.16671 8.27882 7.2545 8.06686 7.41079 7.91058C7.56707 7.7543 7.77903 7.6665 8.00004 7.6665C8.22105 7.6665 8.43302 7.7543 8.5893 7.91058C8.74558 8.06686 8.83337 8.27882 8.83337 8.49984ZM8.00004 11.6665C8.22105 11.6665 8.43302 11.5787 8.5893 11.4224C8.74558 11.2661 8.83337 11.0542 8.83337 10.8332C8.83337 10.6122 8.74558 10.4002 8.5893 10.2439C8.43302 10.0876 8.22105 9.99984 8.00004 9.99984C7.77903 9.99984 7.56707 10.0876 7.41079 10.2439C7.2545 10.4002 7.16671 10.6122 7.16671 10.8332C7.16671 11.0542 7.2545 11.2661 7.41079 11.4224C7.56707 11.5787 7.77903 11.6665 8.00004 11.6665ZM11.1667 8.49984C11.1667 8.72085 11.0789 8.93281 10.9226 9.08909C10.7664 9.24537 10.5544 9.33317 10.3334 9.33317C10.1124 9.33317 9.9004 9.24537 9.74412 9.08909C9.58784 8.93281 9.50004 8.72085 9.50004 8.49984C9.50004 8.27882 9.58784 8.06686 9.74412 7.91058C9.9004 7.7543 10.1124 7.6665 10.3334 7.6665C10.5544 7.6665 10.7664 7.7543 10.9226 7.91058C11.0789 8.06686 11.1667 8.27882 11.1667 8.49984Z"
              fill="#5E23DC"
            />
            <Path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M5.33337 2.1665C5.46598 2.1665 5.59316 2.21918 5.68693 2.31295C5.7807 2.40672 5.83337 2.5339 5.83337 2.6665V3.1665H10.1667V2.6665C10.1667 2.5339 10.2194 2.40672 10.3132 2.31295C10.4069 2.21918 10.5341 2.1665 10.6667 2.1665C10.7993 2.1665 10.9265 2.21918 11.0203 2.31295C11.114 2.40672 11.1667 2.5339 11.1667 2.6665V3.17184C11.268 3.1745 11.3625 3.17939 11.45 3.1865C11.7034 3.2065 11.9407 3.25184 12.1654 3.3665C12.5104 3.54228 12.7909 3.8228 12.9667 4.16784C13.0814 4.3925 13.1267 4.62984 13.1467 4.88317C13.1667 5.1265 13.1667 5.42317 13.1667 5.77984V10.8865C13.1667 11.2432 13.1667 11.5398 13.1467 11.7832C13.1267 12.0365 13.0814 12.2738 12.9667 12.4985C12.7911 12.8434 12.5108 13.1239 12.166 13.2998C11.9407 13.4145 11.7034 13.4598 11.45 13.4798C11.2067 13.4998 10.91 13.4998 10.554 13.4998H5.44671C5.09004 13.4998 4.79337 13.4998 4.55004 13.4798C4.29671 13.4598 4.05937 13.4145 3.83471 13.2998C3.48987 13.1244 3.20938 12.8444 3.03337 12.4998C2.91871 12.2745 2.87337 12.0372 2.85337 11.7838C2.83337 11.5405 2.83337 11.2438 2.83337 10.8878V5.77984C2.83337 5.42317 2.83337 5.1265 2.85337 4.88317C2.87337 4.62984 2.91871 4.3925 3.03337 4.16784C3.20915 3.8228 3.48967 3.54228 3.83471 3.3665C4.05937 3.25184 4.29671 3.2065 4.55004 3.1865C4.6376 3.17939 4.73204 3.1745 4.83337 3.17184V2.6665C4.83337 2.60084 4.84631 2.53582 4.87143 2.47516C4.89656 2.4145 4.93339 2.35938 4.97982 2.31295C5.02625 2.26652 5.08137 2.22969 5.14203 2.20456C5.20269 2.17944 5.26771 2.1665 5.33337 2.1665ZM4.83337 4.33317V4.17184C4.76596 4.17391 4.6986 4.17769 4.63137 4.18317C4.44004 4.1985 4.34871 4.2265 4.28871 4.25717C4.13165 4.33711 4.00398 4.46478 3.92404 4.62184C3.89337 4.68184 3.86537 4.77317 3.85004 4.9645C3.83404 5.16184 3.83337 5.41784 3.83337 5.79984V6.1665H12.1667V5.79984C12.1667 5.4185 12.1667 5.16184 12.15 4.9645C12.1347 4.77317 12.1067 4.68184 12.076 4.62184C11.9961 4.46478 11.8684 4.33711 11.7114 4.25717C11.6514 4.2265 11.56 4.1985 11.368 4.18317C11.301 4.1777 11.2339 4.17392 11.1667 4.17184V4.33317C11.1667 4.46578 11.114 4.59296 11.0203 4.68672C10.9265 4.78049 10.7993 4.83317 10.6667 4.83317C10.5341 4.83317 10.4069 4.78049 10.3132 4.68672C10.2194 4.59296 10.1667 4.46578 10.1667 4.33317V4.1665H5.83337V4.33317C5.83337 4.46578 5.7807 4.59296 5.68693 4.68672C5.59316 4.78049 5.46598 4.83317 5.33337 4.83317C5.20077 4.83317 5.07359 4.78049 4.97982 4.68672C4.88605 4.59296 4.83337 4.46578 4.83337 4.33317ZM12.1667 6.83317H3.83337V10.8665C3.83337 11.2478 3.83337 11.5045 3.85004 11.7012C3.86537 11.8932 3.89337 11.9845 3.92404 12.0445C4.00404 12.2018 4.13137 12.3292 4.28871 12.4092C4.34871 12.4398 4.44004 12.4678 4.63137 12.4832C4.82871 12.4992 5.08471 12.4998 5.46671 12.4998H10.5334C10.9147 12.4998 11.1714 12.4998 11.368 12.4832C11.56 12.4678 11.6514 12.4398 11.7114 12.4092C11.8684 12.3292 11.9961 12.2016 12.076 12.0445C12.1067 11.9845 12.1347 11.8932 12.15 11.7012C12.166 11.5045 12.1667 11.2478 12.1667 10.8665V6.83317Z"
              fill="#5E23DC"
            />
            <Path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M6.5 5.1665C6.5 5.0339 6.55268 4.90672 6.64645 4.81295C6.74022 4.71918 6.86739 4.6665 7 4.6665H9C9.13261 4.6665 9.25978 4.71918 9.35355 4.81295C9.44732 4.90672 9.5 5.0339 9.5 5.1665C9.5 5.29911 9.44732 5.42629 9.35355 5.52006C9.25978 5.61383 9.13261 5.6665 9 5.6665H7C6.86739 5.6665 6.74022 5.61383 6.64645 5.52006C6.55268 5.42629 6.5 5.29911 6.5 5.1665Z"
              fill="#5E23DC"
            />
          </Svg>

          <Text style={styles.subText}>{dateTime}</Text>
        </View>

        <TouchableOpacity onPress={onView} style={styles.viewBtn}>
          <Text style={styles.viewText}>View Details</Text>
        </TouchableOpacity>
      </View>
    </View>
  );
}

const styles = StyleSheet.create({
  card: {
    flexDirection: 'row',
    backgroundColor: '#FFFFFF',
    borderRadius: 18,
    padding: 14,
    marginBottom: 16,
    shadowColor: '#000',
    shadowOpacity: 0.06,
    shadowRadius: 12,
  },

  leftCol: {
    alignItems: 'center',
    marginRight: 14,
  },

  image: {
    width: 92,
    height: 92,
    borderRadius: 14,
    marginBottom: 10,
  },

  statusPill: {
    flexDirection: 'row',
    alignItems: 'center',
    paddingHorizontal: 12,
    paddingVertical: 6,
    borderRadius: 999,
    gap: 6,
  },

  statusText: {
    fontSize: 13,
    fontWeight: '600',
  },

  rightCol: {
    flex: 1,
    justifyContent: 'space-between',
  },

  name: {
    fontSize: 18,
    fontWeight: '700',
    color: '#111827',
    marginBottom: 8,
  },

  row: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 8,
    marginBottom: 6,
  },

  subText: {
    fontSize: 14,
    color: '#374151',
    fontWeight: '500',
    fontFamily: 'SegoeUI-Bold',
    lineHeight: 20,
  },

  viewBtn: {
    alignSelf: 'flex-end',
    backgroundColor: '#6D28D9',
    paddingHorizontal: 24,
    paddingVertical: 10,
    borderRadius: 14,
    marginTop: 10,
  },

  viewText: {
    color: '#FFFFFF',
    fontSize: 15,
    fontWeight: '700',
  },
});
